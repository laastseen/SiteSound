{% extends "admin/layout.html" %}
{% block admin_content %}
<h2>Управление услугами</h2>

<form method="POST" style="background: #151515; padding: 20px; border-radius: 12px; margin-bottom: 30px;">
    <div style="margin-bottom: 15px;">
        <label>Название</label>
        <input type="text" name="title" placeholder="Например: Звукозапись" required style="width: 100%; padding: 8px; background: #222; color: white; border: 1px solid #444;">
    </div>
    <div style="margin-bottom: 15px;">
        <label>Краткое описание</label>
        <textarea name="short_desc" placeholder="Кратко о услуге..." required style="width: 100%; padding: 8px; background: #222; color: white; border: 1px solid #444; height: 60px;"></textarea>
    </div>
    <div style="margin-bottom: 15px;">
        <label>Полное описание (HTML)</label>
        <textarea name="long_desc" placeholder="Подробное описание с HTML-тегами..." required style="width: 100%; padding: 8px; background: #222; color: white; border: 1px solid #444; height: 100px;"></textarea>
    </div>
    <div style="margin-bottom: 15px;">
        <label>Иконка Font Awesome</label>
        <input type="text" name="icon" placeholder="fa-microphone" required style="width: 100%; padding: 8px; background: #222; color: white; border: 1px solid #444;">
    </div>
    <button type="submit" style="padding: 10px 20px; background: white; color: black; border: none; border-radius: 6px; font-weight: bold;">Добавить услугу</button>
</form>

<h3>Существующие услуги</h3>
<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
    {% for s in services %}
    <div style="background: #1a1a1a; padding: 20px; border-radius: 12px; border: 1px solid #333;">
        <h4 style="color: white; margin-bottom: 10px;">{{ s.title }}</h4>
        <p style="opacity: 0.85; margin-bottom: 15px;">{{ s.short_desc[:100] }}{% if s.short_desc|length > 100 %}...{% endif %}</p>
        <div style="display: flex; gap: 10px;">
            <a href="{{ url_for('edit_service', service_id=s.id) }}"
               style="flex: 1; text-align: center; padding: 6px 12px; background: #333; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;">
                Редактировать
            </a>
            <form method="POST" action="{{ url_for('delete_service', service_id=s.id) }}"
                  onsubmit="return confirm('Удалить услугу \"{{ s.title }}\"? Это действие нельзя отменить.')"
                  style="flex: 1;">
                <button type="submit"
                        style="width: 100%; padding: 6px 12px; background: #c00; color: white; border: none; border-radius: 4px; font-size: 0.9rem; cursor: pointer;">
                    Удалить
                </button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}